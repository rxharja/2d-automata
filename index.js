(()=>{var p=Symbol("@ts-pattern/matcher"),B="@ts-pattern/anonymous-select-key",C=function(n){return Boolean(n&&typeof n=="object")},E=function(n){return n&&!!n[p]},j=function n(e,t,r){if(C(e)){if(E(e)){var o=e[p]().match(t),a=o.matched,u=o.selections;return a&&u&&Object.keys(u).forEach(function(i){return r(i,u[i])}),a}if(!C(t))return!1;if(Array.isArray(e))return!!Array.isArray(t)&&e.length===t.length&&e.every(function(i,s){return n(i,t[s],r)});if(e instanceof Map)return t instanceof Map&&Array.from(e.keys()).every(function(i){return n(e.get(i),t.get(i),r)});if(e instanceof Set){if(!(t instanceof Set))return!1;if(e.size===0)return t.size===0;if(e.size===1){var c=Array.from(e.values())[0];return E(c)?Array.from(t.values()).every(function(i){return n(c,i,r)}):t.has(c)}return Array.from(e.values()).every(function(i){return t.has(i)})}return Object.keys(e).every(function(i){var s,m=e[i];return(i in t||E(s=m)&&s[p]().matcherType==="optional")&&n(m,t[i],r)})}return Object.is(t,e)};function h(n){var e;return(e={})[p]=function(){return{match:function(t){return{matched:Boolean(n(t))}}}},e}var nn=h(function(n){return!0});var tn=h(function(n){return typeof n=="string"}),en=h(function(n){return typeof n=="number"}),rn=h(function(n){return typeof n=="boolean"}),on=h(function(n){return typeof n=="bigint"}),cn=h(function(n){return typeof n=="symbol"}),un=h(function(n){return n==null});var K=function(n){return new H(n,[])},H=function(){function n(t,r){this.value=void 0,this.cases=void 0,this.value=t,this.cases=r}var e=n.prototype;return e.with=function(){var t=[].slice.call(arguments),r=t[t.length-1],o=[t[0]],a=[];return t.length===3&&typeof t[1]=="function"?(o.push(t[0]),a.push(t[1])):t.length>2&&o.push.apply(o,t.slice(1,t.length-1)),new n(this.value,this.cases.concat([{match:function(u){var c={},i=Boolean(o.some(function(s){return j(s,u,function(m,S){c[m]=S})})&&a.every(function(s){return s(u)}));return{matched:i,value:i&&Object.keys(c).length?B in c?c[B]:c:u}},handler:r}]))},e.when=function(t,r){return new n(this.value,this.cases.concat([{match:function(o){return{matched:Boolean(t(o)),value:o}},handler:r}]))},e.otherwise=function(t){return new n(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:t}])).run()},e.exhaustive=function(){return this.run()},e.run=function(){for(var t=this.value,r=void 0,o=0;o<this.cases.length;o++){var a=this.cases[o],u=a.match(this.value);if(u.matched){t=u.value,r=a.handler;break}}if(!r){var c;try{c=JSON.stringify(this.value)}catch{c=this.value}throw new Error("Pattern matching error: no pattern matches value "+c)}return r(t,this.value)},n}();var v=(n,e,t)=>n(e(t)),b=(n,e)=>Array.from({length:e-n},(t,r)=>n+r);function P(n){let e="0123456789ABCDEF";return String(e.substr(n>>4&15,1))+e.substr(n&15,1)}var q=(n,e,t)=>"#"+P(n)+P(e)+P(t);function L(n,e,t,r,o,a,u,c,i){return u==null&&(u=128),c==null&&(c=127),i==null&&(i=50),b(0,i).map(s=>{let m=Math.sin(n*s+r)*c+u,S=Math.sin(e*s+o)*c+u,O=Math.sin(t*s+a)*c+u;return q(m,S,O)})}var R=(n,e)=>t=>v(M(e),T(n),t),I=(n,e)=>t=>v(M(e),_(n),t),z=(n,e)=>t=>v(x(e),T(n),t),G=(n,e)=>t=>v(x(e),_(n),t),M=n=>([e,t])=>[e,t-1<0?n:t-1],T=n=>([e,t])=>[e+1>n?0:e+1,t],x=n=>([e,t])=>[e,t+1>n?0:t+1],_=n=>([e,t])=>[e-1<0?n:e-1,t],W=(n,{x:e,y:t,grid:r})=>[I(e,t),M(t),R(e,t),T(e),z(e,t),x(t),G(e,t),_(e)].map(o=>o(n)).map(([o,a])=>r[o][a]).reduceRight((o,a)=>o+a,0),D=(n,[e,t])=>K([n.grid[e][t],W([e,t],n)]).with([0,3],()=>1).with([1,2],()=>1).with([1,3],()=>1).otherwise(()=>0),F=n=>({...n,grid:n.grid.map((e,t)=>e.map((r,o)=>D(n,[t,o])))});function J(n=3,e=3){let[t,r]=[n<3?3:n,e<3?3:e];return{grid:b(0,t).map(a=>b(0,r).map(u=>0)),x:t-1,y:r-1}}function N(){y(f.grid),f=F(f)}var A=L(.1,.1,.1,0,2,4,230,25),w=0;console.log(A);function Q(){w>=A.length&&(w=0);let n=A[w];return console.log(n),w++,n}function y(n){g.clearRect(0,0,d.width,d.height),g.strokeStyle="#111",g.fillStyle=Q(),n.forEach((e,t)=>e.map((r,o)=>{r===1?g.fillRect(t*l,o*l,l,l):g.strokeRect(t*l,o*l,l,l)}))}var k,U=document.querySelector("#gol-start");U.addEventListener("click",()=>{clearInterval(k),k=setInterval(N,80)});var V=document.querySelector("#gol-pause");V.addEventListener("click",()=>{clearInterval(k)});var X=document.querySelector("#gol-random");X.addEventListener("click",()=>{f.grid.forEach((n,e)=>n.forEach((t,r)=>f.grid[e][r]=Math.random()>.85?1:0)),y(f.grid)});var Y=document.querySelector("#gol-clear");Y.addEventListener("click",()=>{f.grid.forEach((n,e)=>n.forEach((t,r)=>f.grid[e][r]=0)),y(f.grid)});var d=document.querySelector("#gol-canvas");d.addEventListener("mousedown",n=>{let[e,t]=[Math.floor(n.pageX/l),Math.floor(n.pageY/l)];f.grid[e][t]=1,y(f.grid)});var l=10,g=d.getContext("2d");d.width=window.innerWidth;d.height=window.innerHeight-100;var Z=Math.floor(window.innerWidth/l),$=Math.floor(window.innerHeight/l),f=J(Z,$);y(f.grid);})();
