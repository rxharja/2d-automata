(()=>{var w=Symbol("@ts-pattern/matcher"),C="@ts-pattern/anonymous-select-key",H=function(n){return Boolean(n&&typeof n=="object")},A=function(n){return n&&!!n[w]},D=function n(t,e,r){if(H(t)){if(A(t)){var o=t[w]().match(e),c=o.matched,u=o.selections;return c&&u&&Object.keys(u).forEach(function(i){return r(i,u[i])}),c}if(!H(e))return!1;if(Array.isArray(t))return!!Array.isArray(e)&&t.length===e.length&&t.every(function(i,s){return n(i,e[s],r)});if(t instanceof Map)return e instanceof Map&&Array.from(t.keys()).every(function(i){return n(t.get(i),e.get(i),r)});if(t instanceof Set){if(!(e instanceof Set))return!1;if(t.size===0)return e.size===0;if(t.size===1){var a=Array.from(t.values())[0];return A(a)?Array.from(e.values()).every(function(i){return n(a,i,r)}):e.has(a)}return Array.from(t.values()).every(function(i){return e.has(i)})}return Object.keys(t).every(function(i){var s,l=t[i];return(i in e||A(s=l)&&s[w]().matcherType==="optional")&&n(l,e[i],r)})}return Object.is(e,t)};function g(n){var t;return(t={})[w]=function(){return{match:function(e){return{matched:Boolean(n(e))}}}},t}var an=g(function(n){return!0});var sn=g(function(n){return typeof n=="string"}),ln=g(function(n){return typeof n=="number"}),fn=g(function(n){return typeof n=="boolean"}),hn=g(function(n){return typeof n=="bigint"}),mn=g(function(n){return typeof n=="symbol"}),gn=g(function(n){return n==null});var O=function(n){return new W(n,[])},W=function(){function n(e,r){this.value=void 0,this.cases=void 0,this.value=e,this.cases=r}var t=n.prototype;return t.with=function(){var e=[].slice.call(arguments),r=e[e.length-1],o=[e[0]],c=[];return e.length===3&&typeof e[1]=="function"?(o.push(e[0]),c.push(e[1])):e.length>2&&o.push.apply(o,e.slice(1,e.length-1)),new n(this.value,this.cases.concat([{match:function(u){var a={},i=Boolean(o.some(function(s){return D(s,u,function(l,d){a[l]=d})})&&c.every(function(s){return s(u)}));return{matched:i,value:i&&Object.keys(a).length?C in a?a[C]:a:u}},handler:r}]))},t.when=function(e,r){return new n(this.value,this.cases.concat([{match:function(o){return{matched:Boolean(e(o)),value:o}},handler:r}]))},t.otherwise=function(e){return new n(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:e}])).run()},t.exhaustive=function(){return this.run()},t.run=function(){for(var e=this.value,r=void 0,o=0;o<this.cases.length;o++){var c=this.cases[o],u=c.match(this.value);if(u.matched){e=u.value,r=c.handler;break}}if(!r){var a;try{a=JSON.stringify(this.value)}catch{a=this.value}throw new Error("Pattern matching error: no pattern matches value "+a)}return r(e,this.value)},n}();var p=(n,t,e)=>n(t(e)),P=(n,t)=>Array.from({length:t-n},(e,r)=>n+r);function E(n){let t="0123456789ABCDEF";return String(t.slice(n>>4&15,(n>>4&15)+1))+t.slice(n&15,(n&15)+1)}var F=(n,t,e)=>"#"+E(n)+E(t)+E(e);function J(n,t,e,r,o,c,u,a,i){let[s,l,d]=[u!=null?u:128,a!=null?a:127,i!=null?i:50];return P(0,d).map(y=>{let T=Math.sin(n*y+r)*l+s,I=Math.sin(t*y+o)*l+s,z=Math.sin(e*y+c)*l+s;return F(T,I,z)})}var K=J(.1,.1,.1,0,2,4,230,25),S=0;function j(){S>=K.length&&(S=0);let n=K[S];return console.log(n),S++,n}var M=(n,t)=>e=>p(x(t),R(n),e),k=(n,t)=>e=>p(x(t),_(n),e),N=(n,t)=>e=>p(L(t),R(n),e),Q=(n,t)=>e=>p(L(t),_(n),e),x=n=>([t,e])=>[t,e-1<0?n:e-1],R=n=>([t,e])=>[t+1>n?0:t+1,e],L=n=>([t,e])=>[t,e+1>n?0:e+1],_=n=>([t,e])=>[t-1<0?n:t-1,e],U=n=>(t,{x:e,y:r,grid:o})=>n.map(c=>c(t)).map(([c,u])=>o[c][u]).reduceRight((c,u)=>c+u,0),V=(n,t)=>U([k(n,t),x(t),M(n,t),R(n),N(n,t),L(t),Q(n,t),_(n)]),Z=([n,t],e)=>O([e.grid[n][t],V(e.x,e.y)([n,t],e)]).with([0,3],()=>1).with([1,2],()=>1).with([1,3],()=>1).otherwise(()=>0),$=([n,t],{x:e,y:r,grid:o})=>{let[[c,u],[a,i],[s,l]]=[k(e,r)([n,t]),x(r)([n,t]),M(e,r)([n,t])],[d,y,T]=[o[c][u],o[a][i],o[s][l]];return d^(y|T)},X=([n,t],{x:e,y:r,grid:o})=>{let[[c,u],[a,i]]=[k(e,r)([n,t]),M(e,r)([n,t])],[s,l]=[o[c][u],o[a][i]];return s^l},Y=new Map([["Game of Life",Z],["Rule 30",$],["Hat",X]]),q=(n,t)=>({...n,grid:n.grid.map((e,r)=>e.map((o,c)=>Y.get(t)([r,c],n)))});function G(n=3,t=3){let[e,r]=[n<3?3:n,t<3?3:t];return{grid:P(0,e).map(c=>P(0,r).map(u=>0)),x:e-1,y:r-1}}function nn(n){n==="Game of Life"&&v.clearRect(0,0,m.width,m.height),b(h.grid),h=q(h,n)}function b(n){v.strokeStyle="#111",v.fillStyle=j(),n.map((t,e)=>t.map((r,o)=>{r===1?v.fillRect(e*f,o*f,f,f):v.strokeRect(e*f,o*f,f,f)}))}var B,tn=document.querySelector("#gol-start");tn.addEventListener("click",()=>{clearInterval(B),B=setInterval(()=>nn("Hat"),80)});var en=document.querySelector("#gol-pause");en.addEventListener("click",()=>{clearInterval(B)});var rn=document.querySelector("#gol-random");rn.addEventListener("click",()=>{h.grid.forEach((n,t)=>n.forEach((e,r)=>h.grid[t][r]=Math.random()>.85?1:0)),b(h.grid)});var on=document.querySelector("#gol-clear");on.addEventListener("click",()=>{v.clearRect(0,0,m.width,m.height),h.grid.forEach((n,t)=>n.forEach((e,r)=>h.grid[t][r]=0)),b(h.grid)});var m=document.querySelector("#gol-canvas");m.addEventListener("mousedown",n=>{let[t,e]=[Math.floor(n.pageX/f),Math.floor(n.pageY/f)];h.grid[t][e]=1,b(h.grid)});var f=10,v=m.getContext("2d");m.width=window.innerWidth;m.height=window.innerHeight-100;var cn=Math.floor(window.innerWidth/f),un=Math.floor(window.innerHeight/f),h=G(cn,un);b(h.grid);})();
